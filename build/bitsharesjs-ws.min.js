!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.t=n();else if("function"==typeof define&&define.i)define([],n);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).o=n()}}(function(){return function(){function n(t,e,i){function r(s,c){if(!e[s]){if(!t[s]){var u="function"==typeof require&&require;if(!c&&u)return u(s,!0);if(o)return o(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var a=e[s]={t:{}};t[s][0].call(a.t,function(n){return r(t[s][1][n]||n)},a,a.t,n,t,e,i)}return e[s].t}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}return n}()({1:[function(n,t,e){(function(i){"use strict";function r(n){return n&&n.s?n:{default:n}}function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}e.s=!0;var s=r(n("./ChainWebSocket")),c=r(n("./GrapheneApi")),u=r(n("./ChainConfig"));if(i)i.u="";else;var f=!1;e.default={h:function(n){this.l=n,inst&&inst.h(n)},v:function(n){f=n},reset:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",t=this,e=arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3;return this.close().then(function(){return inst=new a,inst.h(t.l),inst&&e&&inst.connect(n,i),inst})},p:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ws://localhost:8090",t=arguments[1],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3,i=arguments[3],r=arguments[4];return inst||(inst=new a,inst.h(this.l)),inst&&t&&inst.connect(n,e,i),r&&(inst.m=r),inst},_:function(){return Apis.p().T},close:function(){return inst?new Promise(function(n){inst.close().then(function(){inst=null,n()})}):Promise.resolve()}};var a=function(){function n(){o(this,n)}return n.prototype.connect=function(n,t){var e=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.url=n;if("undefined"!=typeof window&&window.location&&"https:"===window.location.protocol&&n.indexOf("wss://")<0)throw new Error("Secure domains require wss connection");this.k&&(this.k.l=null),this.k=new s.default(n,this.l,t,f,function(n){e.S&&!n&&e.S.exec("get_objects",[["2.1.0"]]).catch(function(n){})}),this.C=this.k.g("","").then(function(){console.log("Connected to API node:",n),e.S=new c.default(e.k,"database"),e.P=new c.default(e.k,"network_broadcast"),e.O=new c.default(e.k,"history"),i&&(e.G=new c.default(e.k,"crypto"));var t=e.S.init().then(function(){return e.S.exec("get_chain_id",[]).then(function(n){return e.T=n,u.default.W(n)})});e.k.I=function(){e.k&&e.k.g("","").then(function(){e.S.init().then(function(){e.l&&e.l("reconnect")}),e.P.init(),e.O.init(),i&&e.G.init()})},e.k.A=function(){e.close().then(function(){e.m&&e.m()})};var r=[t,e.P.init(),e.O.init()];return i&&r.push(e.G.init()),Promise.all(r)}).catch(function(t){return console.error(n,"Failed to initialize with error",t&&t.message),e.close().then(function(){throw t})})},n.prototype.close=function(){var n=this;return this.k&&1===this.k.q.readyState?this.k.close().then(function(){n.k=null}):(this.k=null,Promise.resolve())},n.prototype.H=function(){return this.S},n.prototype.N=function(){return this.P},n.prototype.U=function(){return this.O},n.prototype.j=function(){return this.G},n.prototype.h=function(n){this.l=n},n}();t.t=e.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{F:2,M:3,R:4}],2:[function(n,t,e){(function(n){"use strict";e.s=!0;var i=void 0,r={B:n.J.D||"GPH"};i={L:"CORE",B:"GPH",V:15,K:86400,X:86400,Y:{Z:{L:"BTS",B:"BTS",T:"4018d7844c78f6a6c41c6a552b898022310fc5dec06da467ee7905a8dad512c8"},$:{L:"MUSE",B:"MUSE",T:"45ad2d3f9ef92a49b55c2227eb06123f613bb35dd08bd876f2aea21925a67a67"},nn:{L:"TEST",B:"TEST",T:"39f5e2ede1f8bc1a3a54a7914414e3779e33193f1f5693510e73cb7a87617447"},tn:{L:"GOV",B:"FEW",T:"1cfde7c388b9e8ac06462d68aadbd966b58f88797637d9af805b4560b0e9661e"}},W:function(n){var t=void 0,e=void 0,o=void 0,s=void 0,c=void 0;for(t=0,e=(c=Object.keys(i.Y)).length;t<e;t++)if(s=c[t],(o=i.Y[s]).T===n)return i.en=s,o.B&&(i.B=o.B,r.B=o.B),{en:s,in:o};i.en||console.log("Unknown chain id (this may be a testnet)",n)},reset:function(){i.L="CORE",i.B="GPH",r.B="GPH",i.V=15,i.K=86400,console.log("Chain config reset")},rn:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"GPH";i.B=n,r.B=n}},e.default=i,t.t=e.default}).call(this,n("_process"))},{on:6}],3:[function(n,t,e){(function(i){"use strict";function r(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function o(n){return n||"undefined"==typeof WebSocket||"undefined"==typeof document?s:WebSocket}e.s=!0;var s=void 0;s="undefined"!=typeof WebSocket||i.J.sn?WebSocket:n("ws");var c=5,u=2*c,f=function(){function n(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3,s=this,f=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;r(this,n),this.url=t,this.l=e,this.cn=setTimeout(function(){if(s.un){var n=s.un;s.un=null,s.close(),n(new Error("Connection attempt timed out after "+i/1e3+"s"))}},i),this.un=null,this.I=null,this.closed=!1,this.fn=c,this.an=u,this.hn=a,this.dn=new Promise(function(n,e){s.un=e;var i=o(f);try{s.q=new i(t)}catch(n){s.q={readyState:3,close:function(){}},e(new Error("Invalid url",t," closed"))}s.q.onopen=function(){clearTimeout(s.cn),s.l&&s.l("open"),s.I&&s.I(),s.ln=setInterval(function(){if(s.an--,0==s.an)return console.error(s.url+" connection is dead, terminating ws"),void s.close();s.fn--,0==s.fn&&(s.hn&&s.hn(s.closed),s.fn=c)},5e3),s.un=null,n()},s.q.onerror=function(n){s.ln&&(clearInterval(s.ln),s.ln=void 0),clearTimeout(s.cn),s.l&&s.l("error"),s.un&&s.un(n)},s.q.onmessage=function(n){s.an=u,s.listener(JSON.parse(n.data))},s.q.onclose=function(){s.closed=!0,s.ln&&(clearInterval(s.ln),s.ln=void 0);for(var n=new Error("connection closed"),t=s.wn+1;t<=s.vn;t+=1)s.pn[t].reject(n);s.l&&s.l("closed"),s.bn&&s.bn(),s.A&&s.A()}}),this.vn=0,this.wn=0,this.pn={},this.mn={},this._n={}}return n.prototype.call=function(n){var t=this;if(1!==this.q.readyState)return Promise.reject(new Error("websocket state error:"+this.q.readyState));var e=n[1];if(this.vn+=1,"set_subscribe_callback"!==e&&"subscribe_to_market"!==e&&"broadcast_transaction_with_callback"!==e&&"set_pending_transaction_callback"!==e||(this.mn[this.vn]={yn:n[2][0]},n[2][0]=this.vn),"unsubscribe_from_market"===e||"unsubscribe_from_accounts"===e){if("function"!=typeof n[2][0])throw new Error("First parameter of unsub must be the original callback");var i=n[2].splice(0,1)[0];for(var r in this.mn)if(this.mn[r].yn===i){this._n[this.vn]=r;break}}var o={method:"call",Tn:n};return o.id=this.vn,this.fn=c,new Promise(function(n,e){t.pn[t.vn]={time:new Date,resolve:n,reject:e},t.q.send(JSON.stringify(o))})},n.prototype.listener=function(n){var t=!1,e=null;"notice"===n.method&&(t=!0,n.id=n.Tn[0]),t?e=this.mn[n.id].yn:(e=this.pn[n.id],this.wn=n.id),e&&!t?(n.error?e.reject(n.error):e.resolve(n.result),delete this.pn[n.id],this._n[n.id]&&(delete this.mn[this._n[n.id]],delete this._n[n.id])):e&&t?e(n.Tn[1]):console.log("Warning: unknown websocket response: ",n)},n.prototype.g=function(n,t){var e=this;return this.dn.then(function(){return e.call([1,"login",[n,t]])})},n.prototype.close=function(){var n=this;return new Promise(function(t){if(clearInterval(n.ln),n.ln=void 0,n.bn=function(){t(),n.bn=null},!n.q)return console.log("Websocket already cleared",n),t();n.q.terminate?n.q.terminate():n.q.close(),3===n.q.readyState&&t()})},n}();e.default=f,t.t=e.default}).call(this,n("_process"))},{on:6,q:5}],4:[function(n,t,e){"use strict";function i(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}e.s=!0;var r=function(){function n(t,e){i(this,n),this.k=t,this.kn=e}return n.prototype.init=function(){var n=this;return this.k.call([1,this.kn,[]]).then(function(t){return n.En=t,n})},n.prototype.exec=function(n,t){return this.k.call([this.En,n,t]).catch(function(e){throw console.log("!!! GrapheneApi error: ",n,t,e,JSON.stringify(e)),e})},n}();e.default=r,t.t=e.default},{}],5:[function(n,t,e){},{}],6:[function(n,t,e){function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(n){if(h===setTimeout)return setTimeout(n,0);if((h===i||!h)&&setTimeout)return h=setTimeout,setTimeout(n,0);try{return h(n,0)}catch(t){try{return h.call(null,n,0)}catch(t){return h.call(this,n,0)}}}function s(n){if(d===clearTimeout)return clearTimeout(n);if((d===r||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(n);try{return d(n)}catch(t){try{return d.call(null,n)}catch(t){return d.call(this,n)}}}function c(){p&&w&&(p=!1,w.length?v=w.concat(v):b=-1,v.length&&u())}function u(){if(!p){var n=o(c);p=!0;for(var t=v.length;t;){for(w=v,v=[];++b<t;)w&&w[b].Sn();b=-1,t=v.length}w=null,p=!1,s(n)}}function f(n,t){this.Cn=n,this.gn=t}function a(){}var h,d,l=t.t={};!function(){try{h="function"==typeof setTimeout?setTimeout:i}catch(n){h=i}try{d="function"==typeof clearTimeout?clearTimeout:r}catch(n){d=r}}();var w,v=[],p=!1,b=-1;l.Pn=function(n){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];v.push(new f(n,t)),1!==v.length||p||o(u)},f.prototype.Sn=function(){this.Cn.apply(null,this.gn)},l.title="browser",l.sn=!0,l.J={},l.xn=[],l.version="",l.On={},l.Gn=a,l.addListener=a,l.Wn=a,l.In=a,l.removeListener=a,l.An=a,l.qn=a,l.Hn=a,l.Nn=a,l.Un=function(n){return[]},l.jn=function(n){throw new Error("process.binding is not supported")},l.Fn=function(){return"/"},l.Mn=function(n){throw new Error("process.chdir is not supported")},l.Rn=function(){return 0}},{}]},{},[1])(1)});